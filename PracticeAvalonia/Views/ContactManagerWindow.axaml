<Window
    RequestedThemeVariant="Dark"
    Title="ContactManagerWindow"
    d:DesignHeight="750"
    d:DesignWidth="800"
    mc:Ignorable="d"
    x:Class="PracticeAvalonia.Views.ContactManagerWindow"
    x:DataType="vm:ContactManagerViewModel"
    xmlns="https://github.com/avaloniaui"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:PracticeAvalonia.ViewModels"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Design.DataContext>
        <vm:ContactManagerViewModel />
    </Design.DataContext>

    <Window.Styles>
        <!--  Main Background Style  -->
        <Style Selector="Grid.main-bg">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#0F0F1E" Offset="0" />
                    <GradientStop Color="#1A1A2E" Offset="0.5" />
                    <GradientStop Color="#16213E" Offset="1" />
                </LinearGradientBrush>
            </Setter>
        </Style>

        <!--  Card Styles  -->
        <Style Selector="Border.glass-card">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#25FFFFFF" Offset="0" />
                    <GradientStop Color="#15FFFFFF" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="BorderBrush" Value="#40FFFFFF" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="15" />
            <Setter Property="Effect">
                <DropShadowEffect
                    BlurRadius="20"
                    Color="#30000000"
                    OffsetY="8" />
            </Setter>
        </Style>

        <Style Selector="Border.contact-item">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#20FFFFFF" Offset="0" />
                    <GradientStop Color="#10FFFFFF" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="BorderBrush" Value="#30FFFFFF" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Margin" Value="0,3" />
            <Setter Property="Effect">
                <DropShadowEffect
                    BlurRadius="8"
                    Color="#20000000"
                    OffsetY="3" />
            </Setter>
        </Style>

        <!--  Text Styles  -->
        <Style Selector="TextBlock.title">
            <Setter Property="Foreground" Value="#F8FAFC" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Effect">
                <DropShadowEffect BlurRadius="5" Color="#40000000" />
            </Setter>
        </Style>

        <Style Selector="TextBlock.primary">
            <Setter Property="Foreground" Value="#F1F5F9" />
            <Setter Property="FontWeight" Value="Medium" />
        </Style>

        <Style Selector="TextBlock.secondary">
            <Setter Property="Foreground" Value="#94A3B8" />
        </Style>

        <Style Selector="TextBlock.accent">
            <Setter Property="Foreground" Value="#38BDF8" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>

        <Style Selector="TextBlock.success">
            <Setter Property="Foreground" Value="#10B981" />
            <Setter Property="FontWeight" Value="Medium" />
        </Style>

        <!--  Input Styles  -->
        <Style Selector="TextBox.modern-input">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#25374151" Offset="0" />
                    <GradientStop Color="#35374151" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="Foreground" Value="#F8FAFC" />
            <Setter Property="BorderBrush" Value="#6B7280" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="12,10" />
            <Setter Property="FontSize" Value="14" />
        </Style>

        <Style Selector="TextBox.search-input">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#25374151" Offset="0" />
                    <GradientStop Color="#35374151" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="Foreground" Value="#F8FAFC" />
            <Setter Property="BorderBrush" Value="#38BDF8" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="CornerRadius" Value="25" />
            <Setter Property="Padding" Value="20,12" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Effect">
                <DropShadowEffect BlurRadius="10" Color="#2038BDF8" />
            </Setter>
        </Style>

        <!--  Button Styles  -->
        <Style Selector="Button.primary-btn">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#3B82F6" Offset="0" />
                    <GradientStop Color="#1D4ED8" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="Foreground" Value="#FFFFFF" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Effect">
                <DropShadowEffect
                    BlurRadius="10"
                    Color="#403B82F6"
                    OffsetY="3" />
            </Setter>
        </Style>

        <Style Selector="Button.primary-btn:pointerover">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#2563EB" Offset="0" />
                    <GradientStop Color="#1E40AF" Offset="1" />
                </LinearGradientBrush>
            </Setter>
        </Style>

        <Style Selector="Button.delete-btn">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Foreground" Value="#EF4444" />
        </Style>

        <Style Selector="Button.delete-btn:pointerover">
            <Setter Property="Background" Value="#20EF4444" />
        </Style>

        <!--  Info Panel Style  -->
        <Style Selector="Border.info-panel">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#2510B981" Offset="0" />
                    <GradientStop Color="#1510B981" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="BorderBrush" Value="#3010B981" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="12" />
        </Style>

        <Style Selector="Border.selected-panel">
            <Setter Property="Background">
                <LinearGradientBrush EndPoint="100%,100%" StartPoint="0%,0%">
                    <GradientStop Color="#2538BDF8" Offset="0" />
                    <GradientStop Color="#1538BDF8" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="BorderBrush" Value="#3038BDF8" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="12" />
        </Style>
    </Window.Styles>

    <Grid
        Classes="main-bg"
        Margin="20"
        RowDefinitions="Auto, *">

        <!--  Header Section  -->
        <StackPanel Margin="0,0,0,25">
            <TextBlock
                Classes="title"
                FontSize="32"
                HorizontalAlignment="Center"
                Margin="0,0,0,25"
                Text="ðŸ‘¥ Contact Manager" />
            <TextBox
                Classes="search-input"
                HorizontalAlignment="Center"
                Text="{Binding SearchText}"
                Watermark="ðŸ” Search contacts..."
                Width="350" />
        </StackPanel>

        <!--  Main Content  -->
        <Grid ColumnDefinitions="2*, 1.5*" Grid.Row="1">

            <!--  Contacts List Panel  -->
            <Border
                Classes="glass-card"
                Grid.Column="0"
                Padding="25">
                <Grid RowDefinitions="Auto,*">
                    <TextBlock
                        Classes="title"
                        FontSize="20"
                        Grid.Row="0"
                        Margin="0,0,0,20"
                        Text="ðŸ“‹ All Contacts" />

                    <ListBox
                        Background="Transparent"
                        Grid.Row="1"
                        ItemsSource="{Binding FilteredContacts}"
                        SelectedItem="{Binding SelectedContact}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Classes="contact-item" Padding="15">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <StackPanel Grid.Column="0">
                                            <TextBlock
                                                Classes="primary"
                                                FontSize="16"
                                                FontWeight="Bold"
                                                Text="{Binding Name}" />
                                            <TextBlock
                                                Classes="accent"
                                                FontSize="13"
                                                Margin="0,3,0,0"
                                                Text="{Binding Email}" />
                                            <TextBlock
                                                Classes="success"
                                                FontSize="13"
                                                Margin="0,2,0,0"
                                                Text="{Binding Phone}" />
                                        </StackPanel>

                                        <Button
                                            Classes="delete-btn"
                                            Command="{Binding $parent[ListBox].((vm:ContactManagerViewModel)DataContext).DeleteContactCommand}"
                                            CommandParameter="{Binding}"
                                            Content="ðŸ—‘ï¸"
                                            FontSize="18"
                                            Grid.Column="1"
                                            Height="35"
                                            VerticalAlignment="Center"
                                            Width="35" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Border>

            <!--  Add Contact Form Panel  -->
            <Border
                Classes="glass-card"
                Grid.Column="1"
                Margin="20,0,0,0"
                Padding="25">
                <ScrollViewer Padding="0,0,10,0" VerticalScrollBarVisibility="Auto">
                    <StackPanel Spacing="20">

                        <TextBlock
                            Classes="title"
                            FontSize="20"
                            HorizontalAlignment="Center"
                            Text="âž• Add New Contact" />

                        <StackPanel Spacing="8">
                            <TextBlock
                                Classes="primary"
                                FontWeight="SemiBold"
                                Text="Full Name" />
                            <TextBox Classes="modern-input" Text="{Binding NewName}" />
                        </StackPanel>

                        <StackPanel Spacing="8">
                            <TextBlock
                                Classes="primary"
                                FontWeight="SemiBold"
                                Text="Email Address" />
                            <TextBox Classes="modern-input" Text="{Binding NewEmail}" />
                        </StackPanel>

                        <StackPanel Spacing="8">
                            <TextBlock
                                Classes="primary"
                                FontWeight="SemiBold"
                                Text="Phone Number" />
                            <TextBox Classes="modern-input" Text="{Binding NewPhone}" />
                        </StackPanel>

                        <Button
                            Classes="primary-btn"
                            Command="{Binding AddContactCommand}"
                            Content="âœ¨ Add Contact"
                            FontSize="16"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Center"
                            Margin="0,10,0,0"
                            Padding="0,15" />

                        <!--  Contact Count Info  -->
                        <Border
                            Classes="info-panel"
                            Margin="0,10,0,0"
                            Padding="15">
                            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                <TextBlock Classes="secondary" Text="ðŸ“Š Total Contacts: " />
                                <TextBlock
                                    Classes="success"
                                    FontWeight="Bold"
                                    Text="{Binding Contacts.Count}" />
                            </StackPanel>
                        </Border>

                        <!--  Selected Contact Info  -->
                        <Border
                            Classes="selected-panel"
                            IsVisible="{Binding SelectedContact, Converter={x:Static ObjectConverters.IsNotNull}}"
                            Padding="15">
                            <StackPanel Spacing="8">
                                <TextBlock
                                    Classes="accent"
                                    FontWeight="SemiBold"
                                    HorizontalAlignment="Center"
                                    Text="ðŸ‘¤ Selected Contact" />
                                <TextBlock
                                    Classes="primary"
                                    FontWeight="Bold"
                                    Text="{Binding SelectedContact.Name}" />
                                <TextBlock Classes="accent" Text="{Binding SelectedContact.Email}" />
                                <TextBlock Classes="success" Text="{Binding SelectedContact.Phone}" />
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>
            </Border>

        </Grid>

    </Grid>

</Window>
